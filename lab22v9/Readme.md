# Лабораторна робота №22: LSP: виявлення порушень і альтернативи

Виконав: Місюра Владислав  
Група: ІПЗ-3/1  
Тема: LSP: виявлення порушень і альтернативи (Варіант: Медіаплеєри)

---

## 1. Мета роботи
Поглибити розуміння принципу підстановки Лісков (LSP), навчитися ідентифікувати його порушення в ієрархіях класів та застосовувати рефакторинг для створення стабільних архітектурних рішень.

---

## 2. Аналіз порушення LSP у початковій ієрархії

У першій частині проєкту було реалізовано клас MediaPlayer з методами PlayAudio() та PlayVideo(). Клас AudioOnlyPlayer наслідується від нього, але оскільки він не може відтворювати відео, метод PlayVideo() викидає NotSupportedException.

Чому це порушує LSP:
* Порушення контракту: Базовий тип обіцяє певні дії, які похідний тип відмовляється виконувати.
* Помилки під час виконання (Runtime): Клієнтський код, який очікує MediaPlayer, не знає про обмеження AudioOnlyPlayer, що призводить до крашу програми при спробі відтворити відео.



---

## 3. Рефакторинг: Розділення інтерфейсів (ISP + LSP)

Для виправлення порушення було обрано підхід зміни ієрархії через інтерфейси. 

Структура після рефакторингу:
1. IAudioPlayer — базовий контракт для всіх плеєрів.
2. IVideoPlayer — розширення контракту, яке додає можливість відео.
3. SimpleAudioPlayer — реалізує лише IAudioPlayer.
4. FullMediaPlayer — реалізує IVideoPlayer.

Переваги:
Тепер неможливо передати аудіоплеєр у метод, що вимагає програвання відео, на етапі компіляції. Це робить код передбачуваним та безпечним.



---

## 4. Код рішення (фрагмент)

```csharp
// LSP-сумісне рішення
public interface IAudioPlayer { void PlayAudio(); }
public interface IVideoPlayer : IAudioPlayer { void PlayVideo(); }

public class SimpleAudioPlayer : IAudioPlayer 
{ 
    public void PlayAudio() => Console.WriteLine("Відтворення звуку..."); 
}

public class FullMediaPlayer : IVideoPlayer 
{ 
    public void PlayAudio() => Console.WriteLine("Відтворення звуку...");
    public void PlayVideo() => Console.WriteLine("Відтворення відео...");
}

## 5. Результат виконання та скріншот консолі

Програма демонструє обробку винятку в "поганому" коді та стабільну роботу рефакторингового рішення.
Вивід у консоль:

## 6. Висновки

Принцип LSP вчить нас, що наслідування має базуватися на поведінці, а не лише на схожості назв об'єктів. Розділення інтерфейсів дозволило усунути "нефункціональні" методи в похідних класах, що зробило архітектуру гнучкішою та захищеною від помилок типу "Runtime Exception".